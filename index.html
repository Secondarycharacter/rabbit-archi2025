<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>토끼 건축사사무소 워크패드 스튜디오</title>
<style>
@font-face {
  font-family: 'NanumSquareB';
  src: url('fonts/NanumSquareB.otf') format('opentype');
  font-weight: normal;
  font-style: normal;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  width: 100vw;
  height: 100vh;
  background: #000;
  overflow: hidden;
  font-family: 'NanumSquareB', sans-serif;
  color: #fff;
}

.page-container {
  position: relative;
  width: 100%;
  height: 100%;
}

.logo-wrapper {
  position: absolute;
  left: 50%;
  top: calc(50% - 25px);
  transform: translate(-50%, -100%);
}

.logo-frame {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  max-width: 260px;
  border: 4px solid #fff;
  border-radius: 50%;
  overflow: hidden;
}

.logo-frame img {
  width: 100%;
  height: auto;
  object-fit: contain;
  display: block;
}

.welcome-wrapper {
  position: absolute;
  left: 50%;
  top: calc(50% + 25px);
  transform: translateX(-50%);
}

.welcome-message {
  font-size: 18px;
  line-height: 1.5;
  text-align: center;
  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
  opacity: 0;
  transition: opacity 1s ease;
}

.welcome-message.show {
  opacity: 1;
}

.bottom-area {
  position: absolute;
  left: 50%;
  bottom: 25px;
  transform: translateX(-50%);
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 16px;
}

.uc-animation {
  opacity: 0;
  transition: opacity 0.5s ease;
  display: flex;
  justify-content: center;
  width: 100%;
  transform: translateX(-10px);
}

.uc-animation.show {
  opacity: 1;
}

.uc-animation img {
  width: 160px;
  height: auto;
  object-fit: contain;
}

.maintenance-message {
  font-size: 16px;
  letter-spacing: 1px;
  text-align: center;
  opacity: 0;
  transition: opacity 0.5s ease;
}

.maintenance-message.show {
  opacity: 1;
}

@keyframes fadeBlink {
  0%, 100% { opacity: 0; }
  50% { opacity: 1; }
}

.maintenance-message.fade {
  animation: fadeBlink 1.5s ease-in-out infinite;
}
</style>
</head>
<body>

<div class="page-container">
  <div class="logo-wrapper">
    <div class="logo-frame">
      <img src="images/CI/01 CI_index.png" alt="토끼건축사사무소 CI">
    </div>
  </div>

  <div class="welcome-wrapper">
    <div class="welcome-message" id="welcomeMessage"></div>
  </div>

  <div class="bottom-area">
    <div class="uc-animation" id="ucAnimation">
      <img src="images/UC/ps1.png" alt="토끼굴 애니메이션" id="ucAnimationImage">
    </div>
    <div class="maintenance-message" id="maintenanceMessage">토끼굴을 정비하고 있습니다.</div>
  </div>
</div>

<script>
const welcomeMessage = document.getElementById('welcomeMessage');
const maintenanceMessage = document.getElementById('maintenanceMessage');
const ucAnimationContainer = document.getElementById('ucAnimation');
const ucAnimationImage = document.getElementById('ucAnimationImage');

const welcomeText = '토끼건축사사무소는 공간의 울림과 사람의 이야기에 귀 기울이고,<br>공간의 본질을 탐구하며, 새로운 도약을 꿈꾸는 건축사사무소입니다.';
const animationFrames = Array.from({ length: 15 }, (_, idx) => `images/UC/ps${idx + 1}.png`);
const tailFrames = animationFrames.slice(13);
const frameDuration = 100;
const tailLoopDuration = 5000;
let animationStarted = false;

function preloadFrames(frames) {
  frames.forEach((src) => {
    const img = new Image();
    img.src = src;
  });
}

function playFullSequence(callback) {
  let index = 0;

  function nextFrame() {
    ucAnimationImage.src = animationFrames[index];
    index += 1;

    if (index < animationFrames.length) {
      setTimeout(nextFrame, frameDuration);
    } else if (typeof callback === 'function') {
      callback();
    }
  }

  nextFrame();
}

function playTailLoop() {
  const startTime = performance.now();
  let index = 0;

  function nextTailFrame() {
    ucAnimationImage.src = tailFrames[index % tailFrames.length];
    index += 1;

    if (performance.now() - startTime < tailLoopDuration) {
      setTimeout(nextTailFrame, frameDuration);
    } else {
      playFullSequence(playTailLoop);
    }
  }

  nextTailFrame();
}

function startUcAnimation() {
  if (animationStarted) return;
  animationStarted = true;
  ucAnimationContainer.classList.add('show');
  preloadFrames(animationFrames);
  playFullSequence(playTailLoop);
}

function showWelcomeSequence() {
  welcomeMessage.innerHTML = welcomeText;
  welcomeMessage.classList.add('show');

  setTimeout(() => {
    maintenanceMessage.classList.add('show', 'fade');
    startUcAnimation();
  }, 2000);
}

window.addEventListener('DOMContentLoaded', () => {
  console.log('✅ 인덱스 페이지 로드 완료');
  showWelcomeSequence();
});
</script>

</body>
</html>
